// Copyright Matt Parke 2014
// includes the following libraries
(function(l){function h(b,a,f,c,e){var d=e.asMilliseconds(),g;a.text(moment(d).format("mm:ss"));g=setInterval(function(){d=e.asMilliseconds();e=moment.duration(d-k,"milliseconds");d=e.asMilliseconds();a.data("current",d);a.text(moment(d).format("mm:ss"));1E4>d&&a.addClass("alert");0===d&&(clearInterval(g),f.data("interval-id",""),a.data("current",""),a.removeClass("alert"),b.prop("disabled",!1).removeClass("disabled"),c.prop("disabled",!1).removeClass("disabled"))},k);f.data("interval-id",g);b.prop("disabled",
!0).addClass("disabled");c.prop("disabled",!0).addClass("disabled")}var k=1E3;$(".ui-timer").find(".ui-timer-display").each(function(){$(this).text(moment(0,"milliseconds").format("ss:mm")).fitText(0.8)});$(".ui-timer").on("touchstart",".ui-start-timer",function(){var b=$(this),a=b.closest(".ui-timer"),f=a.find(".ui-timer-display"),c=a.find(".ui-reset-timer"),e=a.find(".ui-timer-amount"),a=6E4*parseInt(a.find(".ui-timer-amount.active").data("minutes")),a=moment.duration(a,"milliseconds");b.prop("disabled")||
h(b,f,c,e,a)});$(".ui-timer").on("touchstart",".ui-reset-timer",function(){var b=$(this),a=b.closest(".ui-timer"),f=a.find(".ui-timer-display"),c=a.find(".ui-timer-amount"),a=a.find(".ui-start-timer");clearInterval(b.data("intervalId"));f.text(moment(moment.duration(0,"milliseconds")).format("mm:ss"));f.removeClass("alert");a.prop("disabled",!1).removeClass("disabled");c.prop("disabled",!1).removeClass("disabled")});$(".ui-timer").on("touchstart",".ui-timer-amount",function(){var b=$(this);b.prop("disabled")||
b.parent().children().removeClass("active").end().end().addClass("active")});$(".ui-pause-all").on("touchstart",function(){var b=$(this);b.hasClass("active")?(b.removeClass("active").text("Pause All"),$(".ui-timer").each(function(){var a=$(this),b=a.find(".ui-timer-display"),c=b.data("current"),e,d;c&&(e=a.find(".ui-start-timer"),d=a.find(".ui-reset-timer"),a=a.find(".ui-timer-amount"),c=moment.duration(c,"milliseconds"),h(e,b,d,a,c))})):(b.addClass("active").text("Resume All"),$(".ui-timer").each(function(){var a=
$(this).find(".ui-reset-timer").data("interval-id");a&&clearInterval(a)}))})})(window);